{% extends "base.html" %}

{% block content %}
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
    </head>
    <body>
        <h1>Hi, {{ current_user.username }}!</h1>
        <h1>This is your account information:</h1>
        <h1>Bitcoin Pirce: {{ bt_price }}!</h1>
        <script type="text/javascript">
            $(document).ready(function(){

                var socket = io.connect('http://127.0.0.1:5000');

                socket.on('connect', function(){
                    socket.send('User has connected!')
                    console.log('User connected!')
                });

                socket.on('message', function(msg) {
                    $("#messages").append('<li>'+msg+'</li>');
                    console.log('Recieved message!')
                });

                $('#sendbutton').on('click', function(){
                    socket.send($('#myMessage').val());
                    $('#myMessage').val('');
                });

            });
        </script>
        <ul id="messages"></ul>
        <input type="text", id="myMessage">
        <button id="sendbutton">Send</button>
    </body>
    

{% endblock %}